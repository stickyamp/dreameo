<ion-content [fullscreen]="true" class="calendar-container">
  <!-- Calendar Section -->
  <div class="calendar-section">
    <!-- Month Navigation -->
    <div class="month-navigation">
      <ion-button fill="clear" class="month-nav-btn" (click)="previousMonth()">
        <ion-icon name="chevron-back" slot="icon-only"></ion-icon>
      </ion-button>
      <h3 class="month-label">{{ getMonthYearLabel() }}</h3>
      <ion-button fill="clear" class="month-nav-btn" (click)="nextMonth()">
        <ion-icon name="chevron-forward" slot="icon-only"></ion-icon>
      </ion-button>
    </div>

    <!-- Calendar Grid -->
    <div class="calendar-grid">
      <!-- Weekday Headers -->
      <div class="weekday-headers">
        <div class="weekday" *ngFor="let day of daysOfWeek">{{ day }}</div>
      </div>

      <!-- Calendar Days -->
      <div class="calendar-days">
        <div
          class="calendar-day"
          *ngFor="let day of calendarDays; trackBy: trackByDay"
          [class.current-month]="day.currentMonth"
          [class.selected]="isSelected(day.date)"
          [class.today]="isToday(day.date)"
          [class.has-dreams]="hasDreams(day.date)"
          (click)="selectDay(day)"
        >
          <span class="day-number">{{ day.day }}</span>
          <span class="dream-indicator" *ngIf="hasDreams(day.date)"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Monthly Dream Count Section -->
  <div class="monthly-stats">
    <div class="stats-header">
      <h3 class="stats-title">
        {{ "CALENDAR.MONTHLY_DREAM_COUNT" | translate }}
      </h3>
      <div class="stats-numbers">
        <span class="dream-count">{{ getMonthlyDreamCount() }}</span>
        <span class="percentage-change positive"
          >+{{ getPercentageChange() }}%</span
        >
      </div>
    </div>

    <!-- Chart -->
    <div class="chart-container chart-modern-bar">
      <div class="chart-bars chart-bars-modern">
        <div class="chart-col" *ngFor="let week of weeklyData; let i = index">
          <div
            class="chart-bar chart-bar-modern"
            [style.height.%]="week.height"
            [class.highest]="week.isHighest"
          >
            <div class="bar-count" *ngIf="week.count > 0">{{ week.count }}</div>
          </div>
          <div class="chart-col-label">{{ week.week }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for dreams list -->
  <div
    id="add-dream-modal"
    #modalOpener="appShowDreamsList"
    appShowDreamsList
  ></div>
</ion-content>
