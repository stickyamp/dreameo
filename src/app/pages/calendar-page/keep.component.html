<ion-header [translucent]="true">
  <ion-toolbar class="dream-toolbar">
    <ion-title i18n="@@calendar.title">Calendario</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="addDream()" fill="clear">
        <ion-icon name="add" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="dream-container">
  <div class="calendar-container">
    <!-- Calendar Header -->
    <div class="calendar-header">
      <ion-button fill="clear" (click)="previousMonth()">
        <ion-icon name="chevron-back"></ion-icon>
      </ion-button>
      <h2 class="month-year">{{ getMonthYearLabel() }}</h2>
      <ion-button fill="clear" (click)="nextMonth()">
        <ion-icon name="chevron-forward"></ion-icon>
      </ion-button>
    </div>

    <!-- Days of Week Header -->
    <div class="calendar-days-header">
      <div class="day-header" *ngFor="let day of daysOfWeek">{{ day }}</div>
    </div>

    <!-- Calendar Grid -->
    <div class="calendar-grid">
      <div *ngFor="let day of calendarDays; trackBy: trackByDay" class="calendar-day"
        [class.has-dreams]="hasDreams(day.date)" [class.selected]="isSelected(day.date)"
        [class.today]="isToday(day.date)" [class.other-month]="!day.currentMonth" (click)="selectDay(day)">
        <span class="day-number">{{ day.day }}</span>
        <span *ngIf="hasDreams(day.date)" class="dream-indicator">●</span>
      </div>
    </div>
  </div>

  <!-- Statistics Section -->
  <div class="statistics-section">
    <h2 class="statistics-title" i18n="@@calendar.statistics">Estadísticas</h2>

    <div class="statistics-grid">
      <div class="stat-card streak">
        <div class="stat-icon">🔥</div>
        <div class="stat-number">{{ statistics.streakDays }}</div>
        <div class="stat-label" i18n="@@calendar.streak">Racha de días</div>
      </div>

      <div class="stat-card total">
        <div class="stat-icon">🌙</div>
        <div class="stat-number">{{ statistics.totalDreams }}</div>
        <div class="stat-label" i18n="@@calendar.total.dreams">Total de sueños</div>
      </div>

      <div class="stat-card good">
        <div class="stat-icon">😊</div>
        <div class="stat-number">{{ statistics.goodDreams }}</div>
        <div class="stat-label" i18n="@@calendar.good.dreams">Sueños buenos</div>
      </div>

      <div class="stat-card bad">
        <div class="stat-icon">😰</div>
        <div class="stat-number">{{ statistics.badDreams }}</div>
        <div class="stat-label" i18n="@@calendar.bad.dreams">Sueños malos</div>
      </div>
    </div>
  </div>
  <!-- Statistics Section END -->

  <!-- Floating Action Button -->
  <ion-fab slot="fixed" vertical="bottom" horizontal="end">
    <ion-button class="fab-dream" (click)="addDream()">
      <ion-icon name="add"></ion-icon>
    </ion-button>
  </ion-fab>
</ion-content>