<ion-header>
  <ion-toolbar class="dream-toolbar">
    <ion-title i18n="@@dream.detail.title">Sueño</ion-title>
    <ion-buttons slot="start">
      <ion-button (click)="dismiss()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="editDream()">
        <ion-icon name="create"></ion-icon>
      </ion-button>
      <ion-button (click)="deleteDream()" color="danger">
        <ion-icon name="trash"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="dream-container">
  <div class="dream-detail">
    <!-- Dream Header -->
    <div class="dream-header">
      <h1 class="dream-title">{{ dream.title }}</h1>
      <div class="dream-meta">
        <span class="dream-date">{{ getFormattedDate() }}</span>
        <span class="dream-time">{{ getFormattedTime() }}</span>
        <span class="dream-type" [class.good]="getDreamType() === 'good'" [class.bad]="getDreamType() === 'bad'">
          <ion-icon [name]="getDreamTypeIcon()"></ion-icon>
          {{ getDreamTypeLabel() }}
        </span>
      </div>
    </div>

    <!-- Dream Content -->
    <div class="dream-content">
      <!-- Text Description -->
      <div *ngIf="dream.description" class="description-section">
        <h3 class="section-title">
          <ion-icon name="document-text" class="section-icon"></ion-icon>
          <span i18n="@@dream.detail.description">Descripción</span>
        </h3>
        <div class="description-text">
          {{ dream.description }}
        </div>
      </div>

      <!-- Audio Section -->
      <div *ngIf="dream.audioPath" class="audio-section">
        <h3 class="section-title">
          <ion-icon name="volume-high" class="section-icon"></ion-icon>
          <span i18n="@@add.dream.voice.title">Grabación de Voz</span>
        </h3>
        <div class="audio-controls">
          <ion-button (click)="(1)" fill="outline" class="play-button" [disabled]="isPlayingAudio">
            <ion-icon [name]="isPlayingAudio ? 'pause' : 'play'" slot="start">
            </ion-icon>
            <span *ngIf="isPlayingAudio" i18n="@@add.dream.voice.playing">Reproduciendo...</span>
            <span *ngIf="!isPlayingAudio" i18n="@@add.dream.voice.play">Reproducir audio</span>
          </ion-button>
        </div>
      </div>

      <!-- No Content Message -->
      <div *ngIf="!dream.description && !dream.audioPath" class="no-content">
        <ion-icon name="moon" class="empty-icon"></ion-icon>
        <p i18n="@@dream.detail.no.description">Este sueño no tiene descripción ni grabación de voz</p>
        <ion-button (click)="editDream()" fill="outline" class="add-content-button">
          <ion-icon name="add" slot="start"></ion-icon>
          <span i18n="@@add.dream.content">Añadir contenido</span>
        </ion-button>
      </div>
    </div>

    <!-- Dream Actions -->
    <div class="dream-actions">
      <ion-button expand="block" fill="outline" class="edit-button" (click)="editDream()">
        <ion-icon name="create" slot="start"></ion-icon>
        <span i18n="@@dream.detail.edit">Editar</span>
      </ion-button>

      <ion-button expand="block" fill="clear" color="danger" (click)="deleteDream()">
        <ion-icon name="trash" slot="start"></ion-icon>
        <span i18n="@@add.dream.delete">Eliminar</span>
      </ion-button>
    </div>

    <!-- Dream Metadata -->
    <div class="dream-metadata">
      <div class="metadata-item">
        <span class="metadata-label" i18n="@@dream.detail.created">Creado:</span>
        <span class="metadata-value">{{ getFullFormattedDate(dream.createdAt) }}</span>
      </div>
      <div *ngIf="dream.updatedAt" class="metadata-item">
        <span class="metadata-label" i18n="@@dream.detail.updated">Actualizado:</span>
        <span class="metadata-value">{{ getFullFormattedDate(dream.updatedAt) }}</span>
      </div>
    </div>
  </div>
</ion-content>