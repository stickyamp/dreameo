<ion-header [translucent]="true">
  <ion-toolbar class="dream-toolbar">
    <ion-title i18n="@@login.title">Login</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content
  [scrollEvents]="false"
  scrollY="true"
  [fullscreen]="true"
  class="login-content"
>
  <div class="login-container">
    <!-- App Icon -->
    <div class="app-icon-container">
      <div class="app-icon">
        <ion-icon name="phone-portrait-outline" class="phone-icon"></ion-icon>
        <span class="app-name" i18n="@@app.name">Dream</span>
      </div>
    </div>

    <!-- Welcome Text -->
    <h1 class="welcome-text" i18n="@@login.welcome">Welcome Back</h1>

    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="login-form">
      <!-- Email Field -->
      <div class="form-group">
        <label class="form-label" i18n="@@login.email">Email</label>
        <ion-input
          formControlName="email"
          type="email"
          i18n-placeholder="@@login.email.placeholder"
          placeholder="Enter your email"
          class="form-input"
          [class.error]="
            loginForm.get('email')?.invalid && loginForm.get('email')?.touched
          "
        >
        </ion-input>
        <div
          *ngIf="
            loginForm.get('email')?.invalid && loginForm.get('email')?.touched
          "
          class="error-message"
          i18n="@@login.email.error"
        >
          Please enter a valid email
        </div>
      </div>

      <!-- Password Field -->
      <div class="form-group">
        <label class="form-label" i18n="@@login.password">Password</label>
        <ion-input
          formControlName="password"
          [type]="showPassword ? 'text' : 'password'"
          i18n-placeholder="@@login.password.placeholder"
          placeholder="Enter your password"
          class="form-input"
          [class.error]="
            loginForm.get('password')?.invalid &&
            loginForm.get('password')?.touched
          "
        >
          <ion-button
            fill="clear"
            slot="end"
            (click)="togglePasswordVisibility()"
            class="password-toggle"
          >
            <ion-icon
              [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
            ></ion-icon>
          </ion-button>
        </ion-input>
        <div
          *ngIf="
            loginForm.get('password')?.invalid &&
            loginForm.get('password')?.touched
          "
          class="error-message"
          i18n="@@login.password.error"
        >
          Password is required
        </div>
      </div>

      <!-- Forgot Password Link -->
      <div class="forgot-password">
        <a href="#" class="forgot-link" i18n="@@login.forgot"
          >Forgot Password?</a
        >
      </div>

      <!-- Login Button -->
      <ion-button
        type="submit"
        expand="block"
        class="login-button"
        [disabled]="loginForm.invalid || isLoading"
      >
        <ion-spinner *ngIf="isLoading" name="crescent"></ion-spinner>
        <span *ngIf="!isLoading" i18n="@@login.button">Log In</span>
      </ion-button>
    </form>

    <!-- Divider -->
    <div class="divider">
      <span i18n="@@login.or">or</span>
    </div>

    <!-- Google Login Button -->
    <ion-button
      expand="block"
      fill="outline"
      class="google-button"
      (click)="onGoogleLogin()"
      [disabled]="isLoading"
    >
      <ion-icon name="logo-google" slot="start"></ion-icon>
      <span i18n="@@login.google.button">Continue with Google</span>
    </ion-button>

    <!-- Sign Up Link -->
    <div class="signup-link">
      <span class="signup-text" i18n="@@login.signup.text"
        >Don't have an account?
      </span>
      <a
        (click)="goToRegister()"
        class="signup-link-text"
        i18n="@@login.signup.link"
        >Sign Up</a
      >
    </div>
  </div>
</ion-content>
