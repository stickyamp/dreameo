<ion-content [scrollEvents]="false" scrollY="true" [fullscreen]="true">
  <div class="content-wrapper">
    <!-- Google Account Section (shown when NOT logged in with Google) -->
    @if(isGoogleUserLogged == undefined){ }@else {
    <div class="google-section" *ngIf="!isGoogleUserLogged">
      <h3 class="section-title">{{ "PROFILE.GOOGLE_ACCOUNT" | translate }}</h3>
      <p class="google-description">
        {{ "PROFILE.GOOGLE_DESCRIPTION" | translate }}
      </p>
      <ion-button
        expand="block"
        class="google-connect-button"
        (click)="connectGoogleAccount()"
        [disabled]="isConnectingGoogle"
      >
        <img src="assets/svgs/google.svg" width="32" height="32" alt="" />
        <span *ngIf="!isConnectingGoogle">{{
          "PROFILE.CONNECT_GOOGLE" | translate
        }}</span>
        <ion-spinner *ngIf="isConnectingGoogle" name="crescent"></ion-spinner>
      </ion-button>
    </div>

    <!-- User Profile Section (shown when logged in with Google) -->
    <div class="user-profile" *ngIf="isGoogleUserLogged">
      <ion-avatar class="user-avatar">
        @if(user.avatar.length > 0){
        <img [src]="user.avatar" />
        }@else {
        <ion-icon name="person-outline" class="user-icon"></ion-icon>
        }
      </ion-avatar>
      <div class="user-info">
        <h2 class="user-name">{{ user.name }}</h2>
        <p class="user-email">{{ user.email }}</p>
      </div>
    </div>
    }
    <!-- Settings List -->
    <ion-list class="settings-list">
      <!-- Language Option -->
      <ion-item button detail="true" (click)="toggleLanguage($event)">
        <ion-icon name="globe-outline" slot="start"></ion-icon>
        <ion-label>{{ "PROFILE.LANGUAGE" | translate }}</ion-label>
        <ion-note slot="end">{{
          selectedLanguage === "en"
            ? ("PROFILE.ENGLISH" | translate)
            : ("PROFILE.SPANISH" | translate)
        }}</ion-note>
      </ion-item>
      <!-- Dark Mode Toggle -->
      <ion-item>
        <ion-icon name="moon-outline" slot="start"></ion-icon>
        <ion-label>{{ "PROFILE.DARK_MODE" | translate }}</ion-label>
        <ion-toggle
          slot="end"
          [checked]="darkMode"
          (ionChange)="toggleDarkMode($event)"
        >
        </ion-toggle>
      </ion-item>
      <ion-item>
        <ion-icon name="notifications-outline" slot="start"></ion-icon>
        <ion-label>{{ "PROFILE.NOTIF_REMINDER_LABEL" | translate }}</ion-label>
        <ion-toggle
          slot="end"
          [checked]="notificationsEnabled"
          [disabled]="notificationsLoading"
          (ionChange)="toggleNotificationPermission()"
        >
        </ion-toggle>
      </ion-item>

      <ion-item button (click)="loadBackUp()" lines="none" *ngIf="isUserLogged">
        <ion-icon name="cloud-download-outline" slot="start"></ion-icon>
        <ion-label>
          {{ "PROFILE.LOAD_BACKUP" | translate }}
        </ion-label>
      </ion-item>

      <ion-item button (click)="exportDreamsPdf()" lines="none">
        <ion-icon name="document-outline" slot="start"></ion-icon>
        <ion-label>{{ "PROFILE.EXPORT_DREAMS_PDF" | translate }}</ion-label>
      </ion-item>
    </ion-list>

    <!-- Danger Zone -->
    <ion-list class="danger-zone">
      <!-- Clean Data -->
      <ion-item button (click)="cleanData()" lines="none">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger">{{
          "PROFILE.CLEAN_DATA" | translate
        }}</ion-label>
      </ion-item>

      @if(isUserLogged){
      <!-- Close Session -->
      <ion-item button (click)="closeSession()" lines="none">
        <ion-icon name="log-out-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger">{{
          "PROFILE.CLOSE_SESSION" | translate
        }}</ion-label>
      </ion-item>

      <ion-item button (click)="deletePermanentAccount()" lines="none">
        <ion-icon name="person-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger">{{
          "PROFILE.DELETE_ACCOUNT" | translate
        }}</ion-label>
      </ion-item>
      } @if(showDebugTools){

      <ion-item button (click)="goToDebug()" lines="none">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger"> Debug </ion-label>
      </ion-item>

      <ion-item button (click)="goToDebug2()" lines="none">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger"> Debug </ion-label>
      </ion-item>

      <ion-item button (click)="goToDebug3()" lines="none">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger"> Debug onboarding </ion-label>
      </ion-item>

      <ion-item button (click)="goToDebug4()" lines="none">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger"> Debug toast </ion-label>
      </ion-item>

      <ion-item button (click)="goToDebug5()" lines="none">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger"> Reset save backup cloud </ion-label>
      </ion-item>

      <ion-item button (click)="goToDebug6()" lines="none">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger"> Try version checker </ion-label>
      </ion-item>

      <ion-item button (click)="sendTestNotification()" lines="none">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger"> Send notification test </ion-label>
      </ion-item>
      }
    </ion-list>

    <div class="app-info-section" tripleClick (tripleClick)="enableDebugMode()">
      <img
        src="assets/images/onboarding/icon_no_bg.png"
        width="100"
        height="96"
      />
      <span class="app-version">{{ appVersion }}</span>
    </div>
  </div>
</ion-content>
