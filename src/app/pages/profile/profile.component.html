<ion-header [translucent]="true">
    <ion-toolbar class="dream-toolbar">
        <ion-title i18n="@@profile.title">Configuraci칩n</ion-title>
        <ion-buttons slot="start">
            <ion-button (click)="goBack()" fill="clear">
                <ion-icon name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="dream-container">
    <div class="profile-container">
        <!-- First section -->
        <div class="first-section">
            <!-- User Profile Section -->
            <div class="profile-header">
                <div class="avatar-container">
                    <div class="profile-avatar">
                        游녻
                    </div>
                </div>
                <h1 class="profile-name">{{ currentUser?.username || userProfile.name }}</h1>
                <p class="profile-email">{{ currentUser?.email || userProfile.email }}</p>
            </div>
            <!-- User Profile Section END -->

            <!-- Statistics Section -->
            <div class="statistics-section">
                <h2 class="statistics-title" i18n="@@calendar.statistics">Estad칤sticas</h2>

                <div class="statistics-grid">
                    <div class="stat-card streak">
                        <div class="stat-icon">游댠</div>
                        <div class="stat-number">{{ statistics.streakDays }}</div>
                        <div class="stat-label" i18n="@@calendar.streak">Racha de d칤as</div>
                    </div>

                    <div class="stat-card total">
                        <div class="stat-icon">游깿</div>
                        <div class="stat-number">{{ statistics.totalDreams }}</div>
                        <div class="stat-label" i18n="@@calendar.total.dreams">Total de sue침os</div>
                    </div>

                    <div class="stat-card good">
                        <div class="stat-icon">游땕</div>
                        <div class="stat-number">{{ statistics.goodDreams }}</div>
                        <div class="stat-label" i18n="@@calendar.good.dreams">Sue침os buenos</div>
                    </div>

                    <div class="stat-card bad">
                        <div class="stat-icon">游땷</div>
                        <div class="stat-number">{{ statistics.badDreams }}</div>
                        <div class="stat-label" i18n="@@calendar.bad.dreams">Sue침os malos</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Statistics Section END -->

        <!-- Settings List -->
        <div class="settings-list">
            <h2 class="settings-title">Configuraci칩n</h2>
            <!-- Language Selection -->
            <ion-item class="setting-item" (click)="openLanguageSelector()">
                <div class="setting-content">
                    <div class="setting-icon">
                        <ion-icon name="language"></ion-icon>
                    </div>
                    <div class="setting-info">
                        <h3 i18n="@@profile.language">Idioma</h3>
                        <p>{{ getCurrentLanguageName() }}</p>
                    </div>
                </div>
                <ion-icon name="chevron-forward" slot="end"></ion-icon>
            </ion-item>

            <!-- Dark Mode Toggle -->
            <ion-item class="setting-item">
                <div class="setting-content">
                    <div class="setting-icon">
                        <ion-icon name="moon"></ion-icon>
                    </div>
                    <div class="setting-info">
                        <h3 i18n="@@profile.dark.mode">Modo oscuro</h3>
                        <p i18n="@@profile.dark.mode.description">Activar el modo oscuro</p>
                    </div>
                </div>
                <ion-toggle slot="end" [(ngModel)]="userProfile.darkMode" (ionChange)="toggleDarkMode($event)">
                </ion-toggle>
            </ion-item>

            <!-- Export Dreams -->
            <ion-item class="setting-item" (click)="exportDreams()">
                <div class="setting-content">
                    <div class="setting-icon">
                        <ion-icon name="share"></ion-icon>
                    </div>
                    <div class="setting-info">
                        <h3 i18n="@@profile.export">Exportar sue침os</h3>
                        <p i18n="@@profile.export.description">Exportar todos los datos de los sue침os</p>
                    </div>
                </div>
                <ion-icon name="chevron-forward" slot="end"></ion-icon>
            </ion-item>

            <!-- Logout -->
            <ion-item class="setting-item danger" (click)="confirmLogout()">
                <div class="setting-content">
                    <div class="setting-icon danger">
                        <ion-icon name="log-out"></ion-icon>
                    </div>
                    <div class="setting-info">
                        <h3 i18n="@@profile.logout">Cerrar sesi칩n</h3>
                        <p i18n="@@profile.logout.description">Salir de tu cuenta</p>
                    </div>
                </div>
                <ion-icon name="chevron-forward" slot="end"></ion-icon>
            </ion-item>

            <!-- Clear Data -->
            <ion-item class="setting-item danger" (click)="confirmClearData()">
                <div class="setting-content">
                    <div class="setting-icon danger">
                        <ion-icon name="trash"></ion-icon>
                    </div>
                    <div class="setting-info">
                        <h3 i18n="@@profile.clear.data">Limpiar datos</h3>
                        <p i18n="@@profile.clear.data.description">Eliminar todos los datos de los sue침os</p>
                    </div>
                </div>
                <ion-icon name="chevron-forward" slot="end"></ion-icon>
            </ion-item>
        </div>

        <!-- App Info -->
        <div class="app-info">
            <div class="info-section">
                <h3 i18n="@@profile.about">Sobre Dream Journal</h3>
                <p>
                    Una aplicaci칩n para organizar y registrar tus sue침os de manera f치cil y privada.
                    Todos tus datos se almacenan localmente en tu dispositivo.
                </p>
            </div>
            <div class="app-version">
                <p i18n="@@profile.version">Versi칩n 1.0.0</p>
            </div>
        </div>
    </div>
</ion-content>